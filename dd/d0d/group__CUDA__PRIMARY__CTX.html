<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NMSU | Pearl Lab | PPT-GPU: Primary Context Management</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NMSU | Pearl Lab | PPT-GPU
   &#160;<span id="projectnumber">1.2</span>
   </div>
   <div id="projectbrief">PPT-GPU is a scalable and flexible framework to predict the performance of GPUs running general purpose workloads. PPT-GPU can use the virtual (PTX) or the native (SASS) ISAs without sacrificing accuracy, ease of use, or portability. The tool is currently focused on NVIDIA GPUs. We plan to extend our approach to model other vendors&#39; GPUs such as AMD and Intel.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Primary Context Management</div>  </div>
</div><!--header-->
<div class="contents">

<p>___MANBRIEF___ primary context management functions of the low-level CUDA driver API (___CURRENT_FILE___) ___ENDMANBRIEF___  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4e92bce186e1f54f845faab565467b3f"><td class="memItemLeft" align="right" valign="top">CUresult <a class="el" href="../../dc/d57/cuda_8h.html#ab85967b2c9c337aa3174818a4e51d8ce">CUDAAPI</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d0d/group__CUDA__PRIMARY__CTX.html#ga4e92bce186e1f54f845faab565467b3f">cuDevicePrimaryCtxRetain</a> (<a class="el" href="../../df/df1/group__CUDA__TYPES.html#gaf9f5bd81658f866613785b3a0bb7d7d9">CUcontext</a> *pctx, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gacd81b70eb9968392bb5cdf582af8eab4">CUdevice</a> dev)</td></tr>
<tr class="memdesc:ga4e92bce186e1f54f845faab565467b3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retain the primary context on the GPU.  <a href="../../dd/d0d/group__CUDA__PRIMARY__CTX.html#ga4e92bce186e1f54f845faab565467b3f">More...</a><br /></td></tr>
<tr class="separator:ga4e92bce186e1f54f845faab565467b3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga859ea14334a8ec3a92f516c1e56fd88f"><td class="memItemLeft" align="right" valign="top">CUresult <a class="el" href="../../dc/d57/cuda_8h.html#ab85967b2c9c337aa3174818a4e51d8ce">CUDAAPI</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d0d/group__CUDA__PRIMARY__CTX.html#ga859ea14334a8ec3a92f516c1e56fd88f">cuDevicePrimaryCtxRelease</a> (<a class="el" href="../../df/df1/group__CUDA__TYPES.html#gacd81b70eb9968392bb5cdf582af8eab4">CUdevice</a> dev)</td></tr>
<tr class="memdesc:ga859ea14334a8ec3a92f516c1e56fd88f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the primary context on the GPU.  <a href="../../dd/d0d/group__CUDA__PRIMARY__CTX.html#ga859ea14334a8ec3a92f516c1e56fd88f">More...</a><br /></td></tr>
<tr class="separator:ga859ea14334a8ec3a92f516c1e56fd88f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49b77fcb3cdda0ae48d7346688275941"><td class="memItemLeft" align="right" valign="top">CUresult <a class="el" href="../../dc/d57/cuda_8h.html#ab85967b2c9c337aa3174818a4e51d8ce">CUDAAPI</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d0d/group__CUDA__PRIMARY__CTX.html#ga49b77fcb3cdda0ae48d7346688275941">cuDevicePrimaryCtxSetFlags</a> (<a class="el" href="../../df/df1/group__CUDA__TYPES.html#gacd81b70eb9968392bb5cdf582af8eab4">CUdevice</a> dev, unsigned int flags)</td></tr>
<tr class="memdesc:ga49b77fcb3cdda0ae48d7346688275941"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set flags for the primary context.  <a href="../../dd/d0d/group__CUDA__PRIMARY__CTX.html#ga49b77fcb3cdda0ae48d7346688275941">More...</a><br /></td></tr>
<tr class="separator:ga49b77fcb3cdda0ae48d7346688275941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga408eed6e55f0ce3ce56504cd90dfac5a"><td class="memItemLeft" align="right" valign="top">CUresult <a class="el" href="../../dc/d57/cuda_8h.html#ab85967b2c9c337aa3174818a4e51d8ce">CUDAAPI</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d0d/group__CUDA__PRIMARY__CTX.html#ga408eed6e55f0ce3ce56504cd90dfac5a">cuDevicePrimaryCtxGetState</a> (<a class="el" href="../../df/df1/group__CUDA__TYPES.html#gacd81b70eb9968392bb5cdf582af8eab4">CUdevice</a> dev, unsigned int *flags, int *active)</td></tr>
<tr class="memdesc:ga408eed6e55f0ce3ce56504cd90dfac5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the state of the primary context.  <a href="../../dd/d0d/group__CUDA__PRIMARY__CTX.html#ga408eed6e55f0ce3ce56504cd90dfac5a">More...</a><br /></td></tr>
<tr class="separator:ga408eed6e55f0ce3ce56504cd90dfac5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2749271f5f42ee5ad781082ceff49b5f"><td class="memItemLeft" align="right" valign="top">CUresult <a class="el" href="../../dc/d57/cuda_8h.html#ab85967b2c9c337aa3174818a4e51d8ce">CUDAAPI</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d0d/group__CUDA__PRIMARY__CTX.html#ga2749271f5f42ee5ad781082ceff49b5f">cuDevicePrimaryCtxReset</a> (<a class="el" href="../../df/df1/group__CUDA__TYPES.html#gacd81b70eb9968392bb5cdf582af8eab4">CUdevice</a> dev)</td></tr>
<tr class="memdesc:ga2749271f5f42ee5ad781082ceff49b5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy all allocations and reset all state on the primary context.  <a href="../../dd/d0d/group__CUDA__PRIMARY__CTX.html#ga2749271f5f42ee5ad781082ceff49b5f">More...</a><br /></td></tr>
<tr class="separator:ga2749271f5f42ee5ad781082ceff49b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>___MANBRIEF___ primary context management functions of the low-level CUDA driver API (___CURRENT_FILE___) ___ENDMANBRIEF___ </p>
<p>This section describes the primary context management functions of the low-level CUDA driver application programming interface.</p>
<p>The primary context is unique per device and shared with the CUDA runtime API. These functions allow integration with other libraries using CUDA. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga408eed6e55f0ce3ce56504cd90dfac5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga408eed6e55f0ce3ce56504cd90dfac5a">&#9670;&nbsp;</a></span>cuDevicePrimaryCtxGetState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CUresult <a class="el" href="../../dc/d57/cuda_8h.html#ab85967b2c9c337aa3174818a4e51d8ce">CUDAAPI</a> cuDevicePrimaryCtxGetState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gacd81b70eb9968392bb5cdf582af8eab4">CUdevice</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>active</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../dc/d57/cuda_8h.html">PPT-GPU/tracing_tool/nvbit/cuda.h</a>&gt;</code></p>

<p>Get the state of the primary context. </p>
<p>Returns in <code>*flags</code> the flags for the primary context of <code>dev</code>, and in <code>*active</code> whether it is active. See <a class="el" href="../../dc/d57/cuda_8h.html#af42d839e18cf82113f1b450ae3c0c660">cuDevicePrimaryCtxSetFlags</a> for flag values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>- Device to get primary context flags for </td></tr>
    <tr><td class="paramname">flags</td><td>- Pointer to store flags </td></tr>
    <tr><td class="paramname">active</td><td>- Pointer to store context state; 0 = inactive, 1 = active</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaaa0eed720f8a87cd1c5fd1c453bc7a03d">CUDA_SUCCESS</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaaacf52f132faf29b473cdda6061f0f44a">CUDA_ERROR_DEINITIALIZED</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa8feb999f0af99b4a25ab26b3866f4df8">CUDA_ERROR_NOT_INITIALIZED</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa6f047e7215788ca96c81af92a04bfb6c">CUDA_ERROR_INVALID_DEVICE</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa90696c86fcee1f536a1ec7d25867feeb">CUDA_ERROR_INVALID_VALUE</a>, \notefnerr</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dc/d57/cuda_8h.html#af42d839e18cf82113f1b450ae3c0c660">cuDevicePrimaryCtxSetFlags</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#ga36193dc05dde46af588434abdc4f0714" title="Returns the flags for the current context.">cuCtxGetFlags</a>, ::cudaGetDeviceFlags </dd></dl>

</div>
</div>
<a id="ga859ea14334a8ec3a92f516c1e56fd88f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga859ea14334a8ec3a92f516c1e56fd88f">&#9670;&nbsp;</a></span>cuDevicePrimaryCtxRelease()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CUresult <a class="el" href="../../dc/d57/cuda_8h.html#ab85967b2c9c337aa3174818a4e51d8ce">CUDAAPI</a> cuDevicePrimaryCtxRelease </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gacd81b70eb9968392bb5cdf582af8eab4">CUdevice</a>&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../dc/d57/cuda_8h.html">PPT-GPU/tracing_tool/nvbit/cuda.h</a>&gt;</code></p>

<p>Release the primary context on the GPU. </p>
<p>Releases the primary context interop on the device. A retained context should always be released once the user is done using it. The context is automatically reset once the last reference to it is released. This behavior is different when the primary context was retained by the CUDA runtime from CUDA 4.0 and earlier. In this case, the primary context remains always active.</p>
<p>Releasing a primary context that has not been previously retained will fail with <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaaa484e9af32c1e9893ff21f0e0191a12d">CUDA_ERROR_INVALID_CONTEXT</a>.</p>
<p>Please note that unlike <a class="el" href="../../dc/d57/cuda_8h.html#a1be85a7e07025e6bbe348e8d2d9b732e">cuCtxDestroy()</a> this method does not pop the context from stack in any circumstances.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>- Device which primary context is released</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaaa0eed720f8a87cd1c5fd1c453bc7a03d">CUDA_SUCCESS</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaaacf52f132faf29b473cdda6061f0f44a">CUDA_ERROR_DEINITIALIZED</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa8feb999f0af99b4a25ab26b3866f4df8">CUDA_ERROR_NOT_INITIALIZED</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa6f047e7215788ca96c81af92a04bfb6c">CUDA_ERROR_INVALID_DEVICE</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaaa484e9af32c1e9893ff21f0e0191a12d">CUDA_ERROR_INVALID_CONTEXT</a> \notefnerr</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d0d/group__CUDA__PRIMARY__CTX.html#ga4e92bce186e1f54f845faab565467b3f" title="Retain the primary context on the GPU.">cuDevicePrimaryCtxRetain</a>, <a class="el" href="../../dc/d57/cuda_8h.html#a1be85a7e07025e6bbe348e8d2d9b732e">cuCtxDestroy</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gaba93fa1c4a4f3da76d87704716a3d3c0" title="Gets the context&#39;s API version.">cuCtxGetApiVersion</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gab144ce4581a0bf7cd362659776534a84" title="Returns the preferred cache configuration for the current context.">cuCtxGetCacheConfig</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gafe15c5d23b83550e31858899b081b4c3" title="Returns the device ID for the current context.">cuCtxGetDevice</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#ga36193dc05dde46af588434abdc4f0714" title="Returns the flags for the current context.">cuCtxGetFlags</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gaab10bd874e0bf40a2989443ad42ed428" title="Returns resource limits.">cuCtxGetLimit</a>, <a class="el" href="../../dc/d57/cuda_8h.html#ae7020f8f1df97da1705d1a9be44ebdac">cuCtxPopCurrent</a>, <a class="el" href="../../dc/d57/cuda_8h.html#a34d4ad0eadff3a9c6024a1379cc8ef76">cuCtxPushCurrent</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#ga138e543965e8c57c652100a3a0fdecd9" title="Sets the preferred cache configuration for the current context.">cuCtxSetCacheConfig</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#ga4629158e32b781e675573ea7c2c4dd17" title="Set resource limits.">cuCtxSetLimit</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gabe39e7dfd58b9b0863781d669920f4cb" title="Block for a context&#39;s tasks to complete.">cuCtxSynchronize</a> </dd></dl>

</div>
</div>
<a id="ga2749271f5f42ee5ad781082ceff49b5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2749271f5f42ee5ad781082ceff49b5f">&#9670;&nbsp;</a></span>cuDevicePrimaryCtxReset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CUresult <a class="el" href="../../dc/d57/cuda_8h.html#ab85967b2c9c337aa3174818a4e51d8ce">CUDAAPI</a> cuDevicePrimaryCtxReset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gacd81b70eb9968392bb5cdf582af8eab4">CUdevice</a>&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../dc/d57/cuda_8h.html">PPT-GPU/tracing_tool/nvbit/cuda.h</a>&gt;</code></p>

<p>Destroy all allocations and reset all state on the primary context. </p>
<p>Explicitly destroys and cleans up all resources associated with the current device in the current process.</p>
<p>Note that it is responsibility of the calling function to ensure that no other module in the process is using the device any more. For that reason it is recommended to use <a class="el" href="../../dc/d57/cuda_8h.html#ae95190e4df4aa3af3f0258c156f93559">cuDevicePrimaryCtxRelease()</a> in most cases. However it is safe for other modules to call <a class="el" href="../../dc/d57/cuda_8h.html#ae95190e4df4aa3af3f0258c156f93559">cuDevicePrimaryCtxRelease()</a> even after resetting the device. Resetting the primary context does not release it, an application that has retained the primary context should explicitly release its usage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>- Device for which primary context is destroyed</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaaa0eed720f8a87cd1c5fd1c453bc7a03d">CUDA_SUCCESS</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaaacf52f132faf29b473cdda6061f0f44a">CUDA_ERROR_DEINITIALIZED</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa8feb999f0af99b4a25ab26b3866f4df8">CUDA_ERROR_NOT_INITIALIZED</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa6f047e7215788ca96c81af92a04bfb6c">CUDA_ERROR_INVALID_DEVICE</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa0d74711f16f63a410d8d94d02e1f5480">CUDA_ERROR_PRIMARY_CONTEXT_ACTIVE</a> \notefnerr</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d0d/group__CUDA__PRIMARY__CTX.html#ga4e92bce186e1f54f845faab565467b3f" title="Retain the primary context on the GPU.">cuDevicePrimaryCtxRetain</a>, <a class="el" href="../../dc/d57/cuda_8h.html#ae95190e4df4aa3af3f0258c156f93559">cuDevicePrimaryCtxRelease</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gaba93fa1c4a4f3da76d87704716a3d3c0" title="Gets the context&#39;s API version.">cuCtxGetApiVersion</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gab144ce4581a0bf7cd362659776534a84" title="Returns the preferred cache configuration for the current context.">cuCtxGetCacheConfig</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gafe15c5d23b83550e31858899b081b4c3" title="Returns the device ID for the current context.">cuCtxGetDevice</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#ga36193dc05dde46af588434abdc4f0714" title="Returns the flags for the current context.">cuCtxGetFlags</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gaab10bd874e0bf40a2989443ad42ed428" title="Returns resource limits.">cuCtxGetLimit</a>, <a class="el" href="../../dc/d57/cuda_8h.html#ae7020f8f1df97da1705d1a9be44ebdac">cuCtxPopCurrent</a>, <a class="el" href="../../dc/d57/cuda_8h.html#a34d4ad0eadff3a9c6024a1379cc8ef76">cuCtxPushCurrent</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#ga138e543965e8c57c652100a3a0fdecd9" title="Sets the preferred cache configuration for the current context.">cuCtxSetCacheConfig</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#ga4629158e32b781e675573ea7c2c4dd17" title="Set resource limits.">cuCtxSetLimit</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gabe39e7dfd58b9b0863781d669920f4cb" title="Block for a context&#39;s tasks to complete.">cuCtxSynchronize</a>, ::cudaDeviceReset </dd></dl>

</div>
</div>
<a id="ga4e92bce186e1f54f845faab565467b3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4e92bce186e1f54f845faab565467b3f">&#9670;&nbsp;</a></span>cuDevicePrimaryCtxRetain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CUresult <a class="el" href="../../dc/d57/cuda_8h.html#ab85967b2c9c337aa3174818a4e51d8ce">CUDAAPI</a> cuDevicePrimaryCtxRetain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gaf9f5bd81658f866613785b3a0bb7d7d9">CUcontext</a> *&#160;</td>
          <td class="paramname"><em>pctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gacd81b70eb9968392bb5cdf582af8eab4">CUdevice</a>&#160;</td>
          <td class="paramname"><em>dev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../dc/d57/cuda_8h.html">PPT-GPU/tracing_tool/nvbit/cuda.h</a>&gt;</code></p>

<p>Retain the primary context on the GPU. </p>
<p>Retains the primary context on the device. Once the user successfully retains the primary context, the primary context will be active and available to the user until the user releases it with <a class="el" href="../../dc/d57/cuda_8h.html#ae95190e4df4aa3af3f0258c156f93559">cuDevicePrimaryCtxRelease()</a> or resets it with <a class="el" href="../../dc/d57/cuda_8h.html#a33c07998fdf4690bec41001729dca170">cuDevicePrimaryCtxReset()</a>. Unlike <a class="el" href="../../dc/d57/cuda_8h.html#a1fdf788e658ebaaed1ad118cfd912b4c">cuCtxCreate()</a> the newly retained context is not pushed onto the stack.</p>
<p>Retaining the primary context for the first time will fail with <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaac5a6ab0245179d297f1fa56ed0097183">CUDA_ERROR_UNKNOWN</a> if the compute mode of the device is <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga409cfd7e4863c34f8430757482886d75adb8a226241187db3b1f41999bb70eb47">CU_COMPUTEMODE_PROHIBITED</a>. The function <a class="el" href="../../da/da5/group__CUDA__DEVICE.html#ga5a73f28b53203cd6097fc48d97ca4ead" title="Returns information about the device.">cuDeviceGetAttribute()</a> can be used with <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga3b9f561d2a42733dde99b2cedcaa413aaf6669a29a6d42968047747cbfc501289">CU_DEVICE_ATTRIBUTE_COMPUTE_MODE</a> to determine the compute mode of the device. The <em>nvidia-smi</em> tool can be used to set the compute mode for devices. Documentation for <em>nvidia-smi</em> can be obtained by passing a -h option to it.</p>
<p>Please note that the primary context always supports pinned allocations. Other flags can be specified by <a class="el" href="../../dc/d57/cuda_8h.html#af42d839e18cf82113f1b450ae3c0c660">cuDevicePrimaryCtxSetFlags()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pctx</td><td>- Returned context handle of the new context </td></tr>
    <tr><td class="paramname">dev</td><td>- Device for which primary context is requested</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaaa0eed720f8a87cd1c5fd1c453bc7a03d">CUDA_SUCCESS</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaaacf52f132faf29b473cdda6061f0f44a">CUDA_ERROR_DEINITIALIZED</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa8feb999f0af99b4a25ab26b3866f4df8">CUDA_ERROR_NOT_INITIALIZED</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaaa484e9af32c1e9893ff21f0e0191a12d">CUDA_ERROR_INVALID_CONTEXT</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa6f047e7215788ca96c81af92a04bfb6c">CUDA_ERROR_INVALID_DEVICE</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa90696c86fcee1f536a1ec7d25867feeb">CUDA_ERROR_INVALID_VALUE</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa264c50688ed110e8476b591befe60c02">CUDA_ERROR_OUT_OF_MEMORY</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaac5a6ab0245179d297f1fa56ed0097183">CUDA_ERROR_UNKNOWN</a> \notefnerr</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dc/d57/cuda_8h.html#ae95190e4df4aa3af3f0258c156f93559">cuDevicePrimaryCtxRelease</a>, <a class="el" href="../../dc/d57/cuda_8h.html#af42d839e18cf82113f1b450ae3c0c660">cuDevicePrimaryCtxSetFlags</a>, <a class="el" href="../../dc/d57/cuda_8h.html#a1fdf788e658ebaaed1ad118cfd912b4c">cuCtxCreate</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gaba93fa1c4a4f3da76d87704716a3d3c0" title="Gets the context&#39;s API version.">cuCtxGetApiVersion</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gab144ce4581a0bf7cd362659776534a84" title="Returns the preferred cache configuration for the current context.">cuCtxGetCacheConfig</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gafe15c5d23b83550e31858899b081b4c3" title="Returns the device ID for the current context.">cuCtxGetDevice</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#ga36193dc05dde46af588434abdc4f0714" title="Returns the flags for the current context.">cuCtxGetFlags</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gaab10bd874e0bf40a2989443ad42ed428" title="Returns resource limits.">cuCtxGetLimit</a>, <a class="el" href="../../dc/d57/cuda_8h.html#ae7020f8f1df97da1705d1a9be44ebdac">cuCtxPopCurrent</a>, <a class="el" href="../../dc/d57/cuda_8h.html#a34d4ad0eadff3a9c6024a1379cc8ef76">cuCtxPushCurrent</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#ga138e543965e8c57c652100a3a0fdecd9" title="Sets the preferred cache configuration for the current context.">cuCtxSetCacheConfig</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#ga4629158e32b781e675573ea7c2c4dd17" title="Set resource limits.">cuCtxSetLimit</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#gabe39e7dfd58b9b0863781d669920f4cb" title="Block for a context&#39;s tasks to complete.">cuCtxSynchronize</a> </dd></dl>

</div>
</div>
<a id="ga49b77fcb3cdda0ae48d7346688275941"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga49b77fcb3cdda0ae48d7346688275941">&#9670;&nbsp;</a></span>cuDevicePrimaryCtxSetFlags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CUresult <a class="el" href="../../dc/d57/cuda_8h.html#ab85967b2c9c337aa3174818a4e51d8ce">CUDAAPI</a> cuDevicePrimaryCtxSetFlags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gacd81b70eb9968392bb5cdf582af8eab4">CUdevice</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../dc/d57/cuda_8h.html">PPT-GPU/tracing_tool/nvbit/cuda.h</a>&gt;</code></p>

<p>Set flags for the primary context. </p>
<p>Sets the flags for the primary context on the device overwriting perviously set ones.</p>
<p>The three LSBs of the <code>flags</code> parameter can be used to control how the OS thread, which owns the CUDA context at the time of an API call, interacts with the OS scheduler when waiting for results from the GPU. Only one of the scheduling flags can be set when creating a context.</p>
<ul>
<li><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga12d89ce3fea2678bf187aa2876ed67a6a331d3ed1e0b55597258bd58346603afc">CU_CTX_SCHED_SPIN</a>: Instruct CUDA to actively spin when waiting for results from the GPU. This can decrease latency when waiting for the GPU, but may lower the performance of CPU threads if they are performing work in parallel with the CUDA thread.</li>
<li><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga12d89ce3fea2678bf187aa2876ed67a6a4bc43364906d8dd5a7d7c8ad46ccc548">CU_CTX_SCHED_YIELD</a>: Instruct CUDA to yield its thread when waiting for results from the GPU. This can increase latency when waiting for the GPU, but can increase the performance of CPU threads performing work in parallel with the GPU.</li>
<li><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga12d89ce3fea2678bf187aa2876ed67a6a62aebfe6432ade3feb32f1a409027852">CU_CTX_SCHED_BLOCKING_SYNC</a>: Instruct CUDA to block the CPU thread on a synchronization primitive when waiting for the GPU to finish work.</li>
<li><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga12d89ce3fea2678bf187aa2876ed67a6ab5bf395cc60a8cbded4c329ae9430b91">CU_CTX_BLOCKING_SYNC</a>: Instruct CUDA to block the CPU thread on a synchronization primitive when waiting for the GPU to finish work. <br  />
 <b>Deprecated:</b> This flag was deprecated as of CUDA 4.0 and was replaced with <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga12d89ce3fea2678bf187aa2876ed67a6a62aebfe6432ade3feb32f1a409027852">CU_CTX_SCHED_BLOCKING_SYNC</a>.</li>
<li><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga12d89ce3fea2678bf187aa2876ed67a6ad75f4c24f8c35ef2ee9d0793badfd88c">CU_CTX_SCHED_AUTO</a>: The default value if the <code>flags</code> parameter is zero, uses a heuristic based on the number of active CUDA contexts in the process <em>C</em> and the number of logical processors in the system <em>P</em>. If <em>C</em> &gt; <em>P</em>, then CUDA will yield to other OS threads when waiting for the GPU (<a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga12d89ce3fea2678bf187aa2876ed67a6a4bc43364906d8dd5a7d7c8ad46ccc548">CU_CTX_SCHED_YIELD</a>), otherwise CUDA will not yield while waiting for results and actively spin on the processor (<a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga12d89ce3fea2678bf187aa2876ed67a6a331d3ed1e0b55597258bd58346603afc">CU_CTX_SCHED_SPIN</a>). Additionally, on Tegra devices, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga12d89ce3fea2678bf187aa2876ed67a6ad75f4c24f8c35ef2ee9d0793badfd88c">CU_CTX_SCHED_AUTO</a> uses a heuristic based on the power profile of the platform and may choose <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga12d89ce3fea2678bf187aa2876ed67a6a62aebfe6432ade3feb32f1a409027852">CU_CTX_SCHED_BLOCKING_SYNC</a> for low-powered devices.</li>
<li><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga12d89ce3fea2678bf187aa2876ed67a6ab5a83507c2a7e14d301621c40c343a81">CU_CTX_LMEM_RESIZE_TO_MAX</a>: Instruct CUDA to not reduce local memory after resizing local memory for a kernel. This can prevent thrashing by local memory allocations when launching many kernels with high local memory usage at the cost of potentially increased memory usage. <br  />
 <b>Deprecated:</b> This flag is deprecated and the behavior enabled by this flag is now the default and cannot be disabled.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>- Device for which the primary context flags are set </td></tr>
    <tr><td class="paramname">flags</td><td>- New flags for the device</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaaa0eed720f8a87cd1c5fd1c453bc7a03d">CUDA_SUCCESS</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaaacf52f132faf29b473cdda6061f0f44a">CUDA_ERROR_DEINITIALIZED</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa8feb999f0af99b4a25ab26b3866f4df8">CUDA_ERROR_NOT_INITIALIZED</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa6f047e7215788ca96c81af92a04bfb6c">CUDA_ERROR_INVALID_DEVICE</a>, <a class="el" href="../../df/df1/group__CUDA__TYPES.html#gga0cdead942fd5028d157641eef6bdeeaaa90696c86fcee1f536a1ec7d25867feeb">CUDA_ERROR_INVALID_VALUE</a>, \notefnerr</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d0d/group__CUDA__PRIMARY__CTX.html#ga4e92bce186e1f54f845faab565467b3f" title="Retain the primary context on the GPU.">cuDevicePrimaryCtxRetain</a>, <a class="el" href="../../dd/d0d/group__CUDA__PRIMARY__CTX.html#ga408eed6e55f0ce3ce56504cd90dfac5a" title="Get the state of the primary context.">cuDevicePrimaryCtxGetState</a>, <a class="el" href="../../dc/d57/cuda_8h.html#a1fdf788e658ebaaed1ad118cfd912b4c">cuCtxCreate</a>, <a class="el" href="../../d0/dd8/group__CUDA__CTX.html#ga36193dc05dde46af588434abdc4f0714" title="Returns the flags for the current context.">cuCtxGetFlags</a>, ::cudaSetDeviceFlags </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 11 2022 13:38:11 for NMSU | Pearl Lab | PPT-GPU by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
